{"ast":null,"code":"import _regeneratorRuntime from\"/home/bbthorson/full-stack-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/bbthorson/full-stack-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/bbthorson/full-stack-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Paper,Grid,TextField,Button}from'@material-ui/core';import{makeStyles}from'@material-ui/core/styles';import{Face,Fingerprint}from'@material-ui/icons';import{Alert}from'@material-ui/lab';import{Redirect}from'react-router-dom';import{useHistory}from'react-router';import{signUp,isAuthenticated}from'../utils/auth';var useStyles=makeStyles(function(theme){return{margin:{margin:theme.spacing(2)},padding:{padding:theme.spacing(1)},button:{textTransform:'none'},marginTop:{marginTop:10}};});export var SignUp=function SignUp(){var classes=useStyles();var history=useHistory();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),passwordConfirmation=_useState6[0],setPasswordConfirmation=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(password!==passwordConfirmation)){_context.next=4;break;}setError('Passwords do not match');_context.next=15;break;case 4:setError('');_context.prev=5;_context.next=8;return signUp(email,password,passwordConfirmation);case 8:data=_context.sent;if(data){history.push('/clinic');}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](5);if(_context.t0 instanceof Error){// handle errors thrown from frontend\nsetError(_context.t0.message);}else{// handle errors thrown from backend\nsetError(_context.t0);}case 15:case\"end\":return _context.stop();}}},_callee,null,[[5,12]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return isAuthenticated()?/*#__PURE__*/React.createElement(Redirect,{to:\"/\"}):/*#__PURE__*/React.createElement(Paper,{className:classes.padding},/*#__PURE__*/React.createElement(\"div\",{className:classes.margin},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:8,alignItems:\"flex-end\"},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Face,null)),/*#__PURE__*/React.createElement(Grid,{item:true,md:true,sm:true,xs:true},/*#__PURE__*/React.createElement(TextField,{id:\"email\",label:\"Email\",type:\"email\",value:email,onChange:function onChange(e){return setEmail(e.currentTarget.value);},fullWidth:true,autoFocus:true,required:true}))),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:8,alignItems:\"flex-end\"},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Fingerprint,null)),/*#__PURE__*/React.createElement(Grid,{item:true,md:true,sm:true,xs:true},/*#__PURE__*/React.createElement(TextField,{id:\"password\",label:\"Password\",type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.currentTarget.value);},fullWidth:true,required:true}))),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:8,alignItems:\"flex-end\"},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Fingerprint,null)),/*#__PURE__*/React.createElement(Grid,{item:true,md:true,sm:true,xs:true},/*#__PURE__*/React.createElement(TextField,{id:\"passwordConfirmation\",label:\"Confirm password\",type:\"password\",value:passwordConfirmation,onChange:function onChange(e){return setPasswordConfirmation(e.currentTarget.value);},fullWidth:true,required:true}))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Grid,{container:true,alignItems:\"center\"},error&&/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Alert,{severity:\"error\"},error))),/*#__PURE__*/React.createElement(Grid,{container:true,justify:\"center\",className:classes.marginTop},/*#__PURE__*/React.createElement(Button,{variant:\"outlined\",color:\"primary\",className:classes.button,onClick:handleSubmit},\"Sign Up\"))));};","map":{"version":3,"sources":["/home/bbthorson/full-stack-portal/frontend/src/marketing/SignUp.tsx"],"names":["React","useState","Paper","Grid","TextField","Button","makeStyles","Face","Fingerprint","Alert","Redirect","useHistory","signUp","isAuthenticated","useStyles","theme","margin","spacing","padding","button","textTransform","marginTop","SignUp","classes","history","email","setEmail","password","setPassword","passwordConfirmation","setPasswordConfirmation","error","setError","handleSubmit","_","data","push","Error","message","e","currentTarget","value"],"mappings":"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","sourcesContent":["import React, { FC, useState } from 'react';\nimport { Paper, Grid, TextField, Button } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Face, Fingerprint } from '@material-ui/icons';\nimport { Alert } from '@material-ui/lab';\nimport { Redirect } from 'react-router-dom';\nimport { useHistory } from 'react-router';\n\nimport { signUp, isAuthenticated } from '../utils/auth';\n\nconst useStyles = makeStyles((theme) => ({\n  margin: {\n    margin: theme.spacing(2),\n  },\n  padding: {\n    padding: theme.spacing(1),\n  },\n  button: {\n    textTransform: 'none',\n  },\n  marginTop: {\n    marginTop: 10,\n  },\n}));\n\nexport const SignUp: FC = () => {\n  const classes = useStyles();\n  const history = useHistory();\n  const [email, setEmail] = useState<string>('');\n  const [password, setPassword] = useState<string>('');\n  const [passwordConfirmation, setPasswordConfirmation] = useState<string>('');\n  const [error, setError] = useState<string>('');\n\n  const handleSubmit = async (_: React.MouseEvent) => {\n    // Password confirmation validation\n    if (password !== passwordConfirmation) setError('Passwords do not match');\n    else {\n      setError('');\n      try {\n        const data = await signUp(email, password, passwordConfirmation);\n\n        if (data) {\n          history.push('/clinic');\n        }\n      } catch (err) {\n        if (err instanceof Error) {\n          // handle errors thrown from frontend\n          setError(err.message);\n        } else {\n          // handle errors thrown from backend\n          setError(err);\n        }\n      }\n    }\n  };\n\n  return isAuthenticated() ? (\n    <Redirect to=\"/\" />\n  ) : (\n    <Paper className={classes.padding}>\n      <div className={classes.margin}>\n        <Grid container spacing={8} alignItems=\"flex-end\">\n          <Grid item>\n            <Face />\n          </Grid>\n          <Grid item md={true} sm={true} xs={true}>\n            <TextField\n              id=\"email\"\n              label=\"Email\"\n              type=\"email\"\n              value={email}\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\n                setEmail(e.currentTarget.value)\n              }\n              fullWidth\n              autoFocus\n              required\n            />\n          </Grid>\n        </Grid>\n        <Grid container spacing={8} alignItems=\"flex-end\">\n          <Grid item>\n            <Fingerprint />\n          </Grid>\n          <Grid item md={true} sm={true} xs={true}>\n            <TextField\n              id=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              value={password}\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\n                setPassword(e.currentTarget.value)\n              }\n              fullWidth\n              required\n            />\n          </Grid>\n        </Grid>\n        <Grid container spacing={8} alignItems=\"flex-end\">\n          <Grid item>\n            <Fingerprint />\n          </Grid>\n          <Grid item md={true} sm={true} xs={true}>\n            <TextField\n              id=\"passwordConfirmation\"\n              label=\"Confirm password\"\n              type=\"password\"\n              value={passwordConfirmation}\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\n                setPasswordConfirmation(e.currentTarget.value)\n              }\n              fullWidth\n              required\n            />\n          </Grid>\n        </Grid>\n        <br />\n        <Grid container alignItems=\"center\">\n          {error && (\n            <Grid item>\n              <Alert severity=\"error\">{error}</Alert>\n            </Grid>\n          )}\n        </Grid>\n        <Grid container justify=\"center\" className={classes.marginTop}>\n          <Button\n            variant=\"outlined\"\n            color=\"primary\"\n            className={classes.button}\n            onClick={handleSubmit}\n          >\n            Sign Up\n          </Button>\n        </Grid>\n      </div>\n    </Paper>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}