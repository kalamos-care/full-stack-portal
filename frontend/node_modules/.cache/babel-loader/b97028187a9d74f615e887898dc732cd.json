{"ast":null,"code":"import _regeneratorRuntime from\"/home/bbthorson/full-stack-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/bbthorson/full-stack-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/bbthorson/full-stack-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Paper,Grid,TextField,Button,FormControlLabel,Checkbox}from'@material-ui/core';import{makeStyles}from'@material-ui/core/styles';import{Face,Fingerprint}from'@material-ui/icons';import{Alert}from'@material-ui/lab';import{Redirect}from'react-router-dom';import{useHistory}from'react-router';import{login,isAuthenticated}from'../utils/auth';var useStyles=makeStyles(function(theme){return{margin:{margin:theme.spacing(2)},padding:{padding:theme.spacing(1)},button:{textTransform:'none'},marginTop:{marginTop:10}};});export var Login=function Login(){var classes=useStyles();var history=useHistory();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setError('');_context.prev=1;_context.next=4;return login(email,password);case 4:data=_context.sent;if(data){history.push('/');}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);if(_context.t0 instanceof Error){// handle errors thrown from frontend\nsetError(_context.t0.message);}else{// handle errors thrown from backend\nsetError(_context.t0);}case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return isAuthenticated()?/*#__PURE__*/React.createElement(Redirect,{to:\"/\"}):/*#__PURE__*/React.createElement(Paper,{className:classes.padding},/*#__PURE__*/React.createElement(\"div\",{className:classes.margin},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:8,alignItems:\"flex-end\"},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Face,null)),/*#__PURE__*/React.createElement(Grid,{item:true,md:true,sm:true,xs:true},/*#__PURE__*/React.createElement(TextField,{id:\"email\",label:\"Email\",type:\"email\",value:email,onChange:function onChange(e){return setEmail(e.currentTarget.value);},fullWidth:true,autoFocus:true,required:true}))),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:8,alignItems:\"flex-end\"},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Fingerprint,null)),/*#__PURE__*/React.createElement(Grid,{item:true,md:true,sm:true,xs:true},/*#__PURE__*/React.createElement(TextField,{id:\"password\",label:\"Password\",type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.currentTarget.value);},fullWidth:true,required:true}))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Grid,{container:true,alignItems:\"center\"},error&&/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Alert,{severity:\"error\"},error))),/*#__PURE__*/React.createElement(Grid,{container:true,alignItems:\"center\",justify:\"space-between\"},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(FormControlLabel,{control:/*#__PURE__*/React.createElement(Checkbox,{color:\"primary\"}),label:\"Remember me\"})),/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Button,{disableFocusRipple:true,disableRipple:true,className:classes.button,variant:\"text\",color:\"primary\"},\"Forgot password ?\"))),/*#__PURE__*/React.createElement(Grid,{container:true,justify:\"center\",className:classes.marginTop},' ',/*#__PURE__*/React.createElement(Button,{variant:\"outlined\",color:\"primary\",className:classes.button,onClick:function onClick(){return history.push('/signup');}},\"Sign Up\"),' ',\"\\xA0\",/*#__PURE__*/React.createElement(Button,{variant:\"outlined\",color:\"primary\",className:classes.button,onClick:handleSubmit},\"Login\"))));};","map":{"version":3,"sources":["/home/bbthorson/full-stack-portal/frontend/src/marketing/Login.tsx"],"names":["React","useState","Paper","Grid","TextField","Button","FormControlLabel","Checkbox","makeStyles","Face","Fingerprint","Alert","Redirect","useHistory","login","isAuthenticated","useStyles","theme","margin","spacing","padding","button","textTransform","marginTop","Login","classes","history","email","setEmail","password","setPassword","error","setError","handleSubmit","_","data","push","Error","message","e","currentTarget","value"],"mappings":"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","sourcesContent":["import React, { FC, useState } from 'react';\nimport {\n  Paper,\n  Grid,\n  TextField,\n  Button,\n  FormControlLabel,\n  Checkbox,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Face, Fingerprint } from '@material-ui/icons';\nimport { Alert } from '@material-ui/lab';\nimport { Redirect } from 'react-router-dom';\nimport { useHistory } from 'react-router';\n\nimport { login, isAuthenticated } from '../utils/auth';\n\nconst useStyles = makeStyles((theme) => ({\n  margin: {\n    margin: theme.spacing(2),\n  },\n  padding: {\n    padding: theme.spacing(1),\n  },\n  button: {\n    textTransform: 'none',\n  },\n  marginTop: {\n    marginTop: 10,\n  },\n}));\n\nexport const Login: FC = () => {\n  const classes = useStyles();\n  const history = useHistory();\n  const [email, setEmail] = useState<string>('');\n  const [password, setPassword] = useState<string>('');\n  const [error, setError] = useState<string>('');\n\n  const handleSubmit = async (_: React.MouseEvent) => {\n    setError('');\n    try {\n      const data = await login(email, password);\n\n      if (data) {\n        history.push('/');\n      }\n    } catch (err) {\n      if (err instanceof Error) {\n        // handle errors thrown from frontend\n        setError(err.message);\n      } else {\n        // handle errors thrown from backend\n        setError(err);\n      }\n    }\n  };\n\n  return isAuthenticated() ? (\n    <Redirect to=\"/\" />\n  ) : (\n    <Paper className={classes.padding}>\n      <div className={classes.margin}>\n        <Grid container spacing={8} alignItems=\"flex-end\">\n          <Grid item>\n            <Face />\n          </Grid>\n          <Grid item md={true} sm={true} xs={true}>\n            <TextField\n              id=\"email\"\n              label=\"Email\"\n              type=\"email\"\n              value={email}\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\n                setEmail(e.currentTarget.value)\n              }\n              fullWidth\n              autoFocus\n              required\n            />\n          </Grid>\n        </Grid>\n        <Grid container spacing={8} alignItems=\"flex-end\">\n          <Grid item>\n            <Fingerprint />\n          </Grid>\n          <Grid item md={true} sm={true} xs={true}>\n            <TextField\n              id=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              value={password}\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\n                setPassword(e.currentTarget.value)\n              }\n              fullWidth\n              required\n            />\n          </Grid>\n        </Grid>\n        <br />\n        <Grid container alignItems=\"center\">\n          {error && (\n            <Grid item>\n              <Alert severity=\"error\">{error}</Alert>\n            </Grid>\n          )}\n        </Grid>\n        <Grid container alignItems=\"center\" justify=\"space-between\">\n          <Grid item>\n            <FormControlLabel\n              control={<Checkbox color=\"primary\" />}\n              label=\"Remember me\"\n            />\n          </Grid>\n          <Grid item>\n            <Button\n              disableFocusRipple\n              disableRipple\n              className={classes.button}\n              variant=\"text\"\n              color=\"primary\"\n            >\n              Forgot password ?\n            </Button>\n          </Grid>\n        </Grid>\n        <Grid container justify=\"center\" className={classes.marginTop}>\n          {' '}\n          <Button\n            variant=\"outlined\"\n            color=\"primary\"\n            className={classes.button}\n            onClick={() => history.push('/signup')}\n          >\n            Sign Up\n          </Button>{' '}\n          &nbsp;\n          <Button\n            variant=\"outlined\"\n            color=\"primary\"\n            className={classes.button}\n            onClick={handleSubmit}\n          >\n            Login\n          </Button>\n        </Grid>\n      </div>\n    </Paper>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}